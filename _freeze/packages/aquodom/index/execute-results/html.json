{
  "hash": "6ea469f4f6aaf10ed2f819fc5fa217fb",
  "result": {
    "markdown": "---\ntitle: \"aquodom \"\n#author: \"Johan van Tent\"\n#date: \"2022-10-19\"\ncategories: [R-packages, CRAN]\nimage: aquo_logo.svg\n---\n\n\n\n\n# aquodom\n\nMet *aquodom* is het op eenvoudige wijze mogelijk om de aquo-domeintabellen te downloaden en te gebruiken in R.\n\nDe website voor *aquodom* is te vinden op <https://redtent.github.io/aquodom/>.\n\n## Installatie\n\n*aquodom* is te installeren vanaf CRAN met:\n\n``` r\ninstall.packages(\"aquodom\") \n```\n\nDe ontwikkelversie is te installeren van [GitHub](https://github.com/RedTent/aquodom) met:\n\n``` r\n# install.packages(\"devtools\")\ndevtools::install_github(\"RedTent/aquodom\")\n```\n## Aquo-domeintabellen\n\nDe Aquo-standaard vormt de Nederlandse standaard voor de uitwisseling van gegevens in het waterbeheer. Met *aquodom*  (kort voor aquo-domeintabellen) is het makkelijk om via de API domeintabellen van de Aquo-standaard in R te downloaden en te gebruiken. \n\nDe belangrijkste functies van *aquodom* zijn `dom()` en `dom_save()`. Met deze functies kan iedere domeintabel van www.aquo.nl worden gedownload. De functie `dom()` geeft de domeintabel als een dataframe. `dom_save()` doet hetzelfde maar slaat daarnaast ook de domeintabel op als xlsx- of csv-bestand. De functie `dom_overzicht()` geeft een compleet overzicht van alle beschikbare domeintabellen. \n\nAlle functies hebben een optioneel argument `peildatum`. Dit argument kan worden gebruikt om alleen domeinwaarden of domeintabellen te tonen die geldig zijn op de peildatum. Met `peildatum = NULL` worden alle resultaten inclusief verouderde waarden getoond.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(aquodom)\n\ndom(\"MonsterType\")\n#> New names:\n#> Rows: 267 Columns: 7\n#> ── Column specification\n#> ──────────────────────────────────────────────────────── Delimiter: \";\" chr\n#> (7): ...1, Elementtype, Voorkeurslabel, Metadata, Wijzigingsdatum, Begin...\n#> ℹ Use `spec()` to retrieve the full column specification for this data. ℹ\n#> Specify the column types or set `show_col_types = FALSE` to quiet this message.\n#> New names:\n#> Rows: 8 Columns: 6\n#> ── Column specification\n#> ──────────────────────────────────────────────────────── Delimiter: \";\" chr\n#> (5): ...1, Begin geldigheid, Eind geldigheid, Gerelateerd, Omschrijving dbl\n#> (1): Id\n#> ℹ Use `spec()` to retrieve the full column specification for this data. ℹ\n#> Specify the column types or set `show_col_types = FALSE` to quiet this message.\n#> • `` -> `...1`\n#> # A tibble: 7 × 6\n#>      id omschrijving         begin_geldigheid eind_geldigheid guid       gerel…¹\n#>   <dbl> <chr>                <date>           <date>          <chr>      <chr>  \n#> 1    10 analysemonster       2017-12-13       2100-01-01      Id-6a3e6c… Id-990…\n#> 2     8 materiaalmonster     2015-11-18       2100-01-01      Id-f811da… Id-2d1…\n#> 3    11 samengevoegd monster 2017-12-13       2100-01-01      Id-81ce36… Id-8df…\n#> 4     4 toetsmonster         2015-11-18       2100-01-01      Id-0034df… Id-ad4…\n#> 5     9 uitloogmonster       2015-11-18       2100-01-01      Id-6053ff… Id-488…\n#> 6     1 veldmonster          2015-11-18       2100-01-01      Id-74dd8c… Id-3e9…\n#> 7     7 zeefmonster          2015-11-18       2100-01-01      Id-8d483a… Id-63a…\n#> # … with abbreviated variable name ¹​gerelateerd\n\n#De namen van domeintabellen zijn niet hoofdlettergevoelig\nall.equal(dom(\"MonsterType\"), dom(\"monstertype\"))\n#> [1] TRUE\n\n# Alle domeinwaarden inclusief verouderde waarden\ndom(\"MonsterType\", peildatum = NULL)\n#> # A tibble: 8 × 6\n#>      id omschrijving         begin_geldigheid eind_geldigheid guid       gerel…¹\n#>   <dbl> <chr>                <date>           <date>          <chr>      <chr>  \n#> 1    10 analysemonster       2017-12-13       2100-01-01      Id-6a3e6c… Id-990…\n#> 2     8 materiaalmonster     2015-11-18       2100-01-01      Id-f811da… Id-2d1…\n#> 3    10 mengmonster          2015-11-18       2017-12-12      Id-a0a782… <NA>   \n#> 4    11 samengevoegd monster 2017-12-13       2100-01-01      Id-81ce36… Id-8df…\n#> 5     4 toetsmonster         2015-11-18       2100-01-01      Id-0034df… Id-ad4…\n#> 6     9 uitloogmonster       2015-11-18       2100-01-01      Id-6053ff… Id-488…\n#> 7     1 veldmonster          2015-11-18       2100-01-01      Id-74dd8c… Id-3e9…\n#> 8     7 zeefmonster          2015-11-18       2100-01-01      Id-8d483a… Id-63a…\n#> # … with abbreviated variable name ¹​gerelateerd\n\nhead(dom_overzicht(), 3)\n#> # A tibble: 3 × 7\n#>   domeintabel         domeintab…¹ wijzigin…² begin_ge…³ eind_gel…⁴ kolom…⁵ guid \n#>   <chr>               <chr>       <date>     <date>     <date>     <list>  <chr>\n#> 1 AfsluitmiddelType   Domeintabel 2022-06-07 2016-03-12 2100-01-01 <chr>   Id-e…\n#> 2 Assemblagemethode   Domeintabel 2022-07-05 2022-07-05 2100-01-01 <chr>   Id-2…\n#> 3 Bekleding_materiaal Domeintabel 2022-09-18 2016-03-12 2100-01-01 <chr>   Id-c…\n#> # … with abbreviated variable names ¹​domeintabelsoort, ²​wijzigingsdatum,\n#> #   ³​begin_geldigheid, ⁴​eind_geldigheid, ⁵​kolommen\n\nnrow(dom_overzicht())\n#> [1] 138\n# inclusief ongeldige domeintabellen\nnrow(dom_overzicht(peildatum = NULL))\n#> [1] 267\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n\ndom_save(\"monstertype\")\n\n```\n:::\n\n\n\n## Caching en opslaan\n\nHet downloaden van grotere domeintabellen kan behoorlijk wat tijd in beslag nemen. Daarom maakt *aquodom* gebruik van caching. Als een domeintabel eenmaal is gedownload wordt in dezelfde R-sessie gebruik gemaakt van de cache. Voor het gebruik van dezelfde domeintabel in verschillende R-sessies kan de domeintabel het beste opgeslagen worden, bijv. met `dom_save()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# De eerste keer duurt vrij lang\nsystem.time(dom(\"Hoedanigheid\"))\n#> New names:\n#> Rows: 500 Columns: 8\n#> ── Column specification\n#> ──────────────────────────────────────────────────────── Delimiter: \";\" chr\n#> (7): ...1, Begin geldigheid, Codes, Eind geldigheid, Gerelateerd, Groep,... dbl\n#> (1): Id\n#> ℹ Use `spec()` to retrieve the full column specification for this data. ℹ\n#> Specify the column types or set `show_col_types = FALSE` to quiet this message.\n#> • `` -> `...1`\n#> .\n#> New names:\n#> Rows: 500 Columns: 8\n#> ── Column specification\n#> ──────────────────────────────────────────────────────── Delimiter: \";\" chr\n#> (7): ...1, Begin geldigheid, Codes, Eind geldigheid, Gerelateerd, Groep,... dbl\n#> (1): Id\n#> ℹ Use `spec()` to retrieve the full column specification for this data. ℹ\n#> Specify the column types or set `show_col_types = FALSE` to quiet this message.\n#> • `` -> `...1`\n#> .\n#> New names:\n#> Rows: 238 Columns: 8\n#> ── Column specification\n#> ──────────────────────────────────────────────────────── Delimiter: \";\" chr\n#> (7): ...1, Begin geldigheid, Codes, Eind geldigheid, Gerelateerd, Groep,... dbl\n#> (1): Id\n#> ℹ Use `spec()` to retrieve the full column specification for this data. ℹ\n#> Specify the column types or set `show_col_types = FALSE` to quiet this message.\n#> • `` -> `...1`\n#>    user  system elapsed \n#>    0.60    0.30    4.58\n\n# De tweede keer gaat veel sneller\nsystem.time(dom(\"Hoedanigheid\"))\n#>    user  system elapsed \n#>    0.03    0.00    0.03\n```\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}